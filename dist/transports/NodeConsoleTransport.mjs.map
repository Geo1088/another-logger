{"version":3,"file":"NodeConsoleTransport.mjs","sources":["../../src/transports/NodeConsoleTransport.ts"],"sourcesContent":["import ansiColors from 'ansi-colors';\n\nimport { FormattedTransport } from '../models';\n\ntype StyleKey = keyof typeof ansiColors[\"styles\"];\n\n/** A transport that logs messages to the Node.js console. */\nexport class NodeConsoleTransport extends FormattedTransport {\n\tshowTimestamps: boolean;\n\tlevelTextCache = new Map<string, string>();\n\n\tconstructor({\n\t\tshowTimestamps = false,\n\t\tlevelStyles = {},\n\t}: {\n\t\tshowTimestamps?: boolean,\n\t\tlevelStyles?: { [levelName: string]: StyleKey | StyleKey[] },\n\t} = {}) {\n\t\tsuper({\n\t\t\tcolors: true,\n\t\t});\n\n\t\tthis.showTimestamps = showTimestamps;\n\t\tfor (let [levelName, styles] of Object.entries(levelStyles)) {\n\t\t\tlet levelText = levelName;\n\t\t\tif (!Array.isArray(styles)) styles = [styles];\n\t\t\tstyles.forEach(style => levelText = ansiColors[style](levelText));\n\t\t\tthis.levelTextCache.set(levelName, levelText);\n\t\t}\n\t}\n\n\tsend(message: string, levelName: string) {\n\t\tconst levelText = this.levelTextCache.get(levelName) || levelName;\n\t\tconsole.log(`${this.showTimestamps ? new Date().toISOString().substr(11, 8) + ' ' : ''}${levelText} ${message}`);\n\t}\n}\n"],"names":[],"mappings":";;;AAMA;MACa,oBAAqB,SAAQ,kBAAkB;IAI3D,YAAY,EACX,cAAc,GAAG,KAAK,EACtB,WAAW,GAAG,EAAE,MAIb,EAAE;QACL,KAAK,CAAC;YACL,MAAM,EAAE,IAAI;SACZ,CAAC,CAAC;QAXJ,mBAAc,GAAG,IAAI,GAAG,EAAkB,CAAC;QAa1C,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;QACrC,KAAK,IAAI,CAAC,SAAS,EAAE,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;YAC5D,IAAI,SAAS,GAAG,SAAS,CAAC;YAC1B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC;gBAAE,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC;YAC9C,MAAM,CAAC,OAAO,CAAC,KAAK,IAAI,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YAClE,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;SAC9C;KACD;IAED,IAAI,CAAC,OAAe,EAAE,SAAiB;QACtC,MAAM,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,SAAS,CAAC;QAClE,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,cAAc,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,SAAS,IAAI,OAAO,EAAE,CAAC,CAAC;KACjH;;;;;"}